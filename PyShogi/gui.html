<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>PyShogi.gui API documentation</title>
<meta name="description" content="">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>PyShogi.gui</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="PyShogi.gui.GameBoard"><code class="flex name class">
<span>class <span class="ident">GameBoard</span></span>
<span>(</span><span>board_size, color)</span>
</code></dt>
<dd>
<div class="desc"><p>simple base class for visible game objects</p>
<p>pygame.sprite.Sprite(*groups): return Sprite</p>
<p>The base class for visible game objects. Derived classes will want to
override the Sprite.update() method and assign Sprite.image and Sprite.rect
attributes.
The initializer can accept any number of Group instances that
the Sprite will become a member of.</p>
<p>When subclassing the Sprite class, be sure to call the base initializer
before adding the Sprite to Groups.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GameBoard(pygame.sprite.Sprite):
    def __init__(self, board_size, color):
        # Call the parent class (Sprite) constructor
        # We could use super().__init__(), but this is more explicit
        # and avoid any issues from super() accidentally getting the wrong class
        pygame.sprite.Sprite.__init__(self)
        # create sprite stuff
        self.image = pygame.Surface(board_size)
        self.image.fill(color)
        self.rect = self.image.get_rect()
        # lists for the board and held pieces
        self.board = [[None for x in range(9)] for y in range(9)]
        self.held_white = []
        self.held_black = []
        # create an array of collision points to help check for piece placement
        self.grid = {}
        grid_rect = pygame.Rect(0, 0, board_size[0]/9, board_size[1]/9)
        for x in range(9):
            for y in range(9):
                grid_rect.topleft = (x*board_size[0]/9, y*board_size[1]/9)
                self.grid[(x, y)] = grid_rect.center

    def on_square(self, rect):
        # check to see if a rect is on a grid cell
        # this is done by checking if the rect collides with the center of the grid cell
        for key, pos in self.grid.items():
            if rect.collidepoint(pos):
                return key
        return None

    def snap_piece(self, rect, pos):
        # set a piece&#39;s position such that it is centered within a given grid cell
        x, y = pos
        grid_rect = pygame.Rect(0, 0, self.rect.width/9, self.rect.height/9)
        grid_rect.topleft = (x*self.rect.width/9, y*self.rect.height/9)
        rect.center = grid_rect.center

    def add_piece(self, piece, pos):
        # add a piece to the board and set its position
        x, y = pos
        self.board[x][y] = piece
        self.snap_piece(piece.rect, pos)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pygame.sprite.Sprite</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="PyShogi.gui.GameBoard.add_piece"><code class="name flex">
<span>def <span class="ident">add_piece</span></span>(<span>self, piece, pos)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="PyShogi.gui.GameBoard.on_square"><code class="name flex">
<span>def <span class="ident">on_square</span></span>(<span>self, rect)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="PyShogi.gui.GameBoard.snap_piece"><code class="name flex">
<span>def <span class="ident">snap_piece</span></span>(<span>self, rect, pos)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="PyShogi.gui.GamePiece"><code class="flex name class">
<span>class <span class="ident">GamePiece</span></span>
<span>(</span><span>piece_size, color)</span>
</code></dt>
<dd>
<div class="desc"><p>simple base class for visible game objects</p>
<p>pygame.sprite.Sprite(*groups): return Sprite</p>
<p>The base class for visible game objects. Derived classes will want to
override the Sprite.update() method and assign Sprite.image and Sprite.rect
attributes.
The initializer can accept any number of Group instances that
the Sprite will become a member of.</p>
<p>When subclassing the Sprite class, be sure to call the base initializer
before adding the Sprite to Groups.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GamePiece(pygame.sprite.Sprite):
    def __init__(self, piece_size, color):
        # Call the parent class (Sprite) constructor
        # We could use super().__init__(), but this is more explicit
        # and avoid any issues from super() accidentally getting the wrong class
        pygame.sprite.Sprite.__init__(self)

        # Create an image of the block, and fill it with a color.
        # This could also be an image loaded from the disk.
        self.image = pygame.Surface(piece_size)
        self.image.fill(color)

        # Fetch the rectangle object that has the dimensions of the image
        # Update the position of this object by setting the values of rect.x and rect.y
        self.rect = self.image.get_rect()</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pygame.sprite.Sprite</li>
</ul>
</dd>
<dt id="PyShogi.gui.GameState"><code class="flex name class">
<span>class <span class="ident">GameState</span></span>
<span>(</span><span>board_in, pieces_in)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GameState():
    def __init__(self, board_in, pieces_in):
        # sprite groups for stuff
        # these are needed for drwaing all the sprites
        self.board_group = pygame.sprite.Group(board_in)
        self.pieces_group = pygame.sprite.Group(pieces_in)
        # references to the board and pieces
        # we want these so we can easily access them from the GUI
        self.board = board_in
        self.pieces = pieces_in</code></pre>
</details>
</dd>
<dt id="PyShogi.gui.GameWindow"><code class="flex name class">
<span>class <span class="ident">GameWindow</span></span>
<span>(</span><span>game_state)</span>
</code></dt>
<dd>
<div class="desc"><p>Window that renders and controls the game.</p>
<p>Pygame is automatically initialized if needed. No window is opened until
<code><a title="PyShogi.gui.GameWindow.run" href="#PyShogi.gui.GameWindow.run">GameWindow.run()</a></code> is called.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>game_state</code></strong> :&ensp;<code>gui.GameState</code></dt>
<dd>The game to display/control</dd>
</dl>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>game</code></strong> :&ensp;<code>gui.GameState</code></dt>
<dd>Game to render/control</dd>
<dt><strong><code>drag_item</code></strong> :&ensp;<code>gui.GamePiece</code></dt>
<dd>Piece (if any) being dragged by the user</dd>
<dt><strong><code>rollback_pos</code></strong> :&ensp;<code>tuple</code></dt>
<dd>The dragged piece's original position</dd>
<dt><strong><code>running</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether or not the game has been closed or otherwise ended</dd>
<dt><strong><code>screen</code></strong> :&ensp;<code>pygame.Surface</code></dt>
<dd>Surface to render the game on</dd>
<dt><strong><code>clock</code></strong> :&ensp;<code>pygame.time.Clock</code></dt>
<dd>Clock to limit framerate</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class GameWindow():
    &#34;&#34;&#34;Window that renders and controls the game.

    Pygame is automatically initialized if needed. No window is opened until
    `GameWindow.run()` is called.

    Args:
        game_state (gui.GameState): The game to display/control

    Attributes:
        game (gui.GameState): Game to render/control
        drag_item (gui.GamePiece): Piece (if any) being dragged by the user
        rollback_pos (tuple): The dragged piece&#39;s original position
        running (bool): Whether or not the game has been closed or otherwise ended
        screen (pygame.Surface): Surface to render the game on
        clock (pygame.time.Clock): Clock to limit framerate
    &#34;&#34;&#34;

    def __init__(self, game_state):
        # initialize Pygame
        if not pygame.get_init():
            pygame.init()
        # game to display/control
        self.game = game_state
        # keep track of the selected piece
        self.drag_item = None
        self.rollback_pos = None
        # whether or not to run this game window
        self.running = False
        # these are created once self.run() is called
        self.screen = None
        self.clock = None

    def _handle_event(self, event):
        &#34;&#34;&#34;Handle a given pygame event that has occured in this window

        The events we care about include: closing the window, clicking the mouse buttons,
        and releasing the mouse buttons. Any other events can be ignored.

        Args:
            event (pygame.Event): The event to handle
        &#34;&#34;&#34;
        if event.type == pygame.QUIT:
            self.running = False
        if event.type == pygame.MOUSEBUTTONDOWN:
            if event.button == 1:
                # if the left mouse button was pressed, check if we clicked on a piece
                for piece in self.game.pieces:
                    if piece.rect.collidepoint(event.pos):
                        # we clicked on a piece, start dragging it
                        self.drag_item = piece
                        self.rollback_pos = piece.rect.center
            if event.button == 3 and self.drag_item is not None:
                # if the right mouse button is pressed and we&#39;re dragging something,
                self.drag_item.rect.center = self.rollback_pos
                self.drag_item = None
        if event.type == pygame.MOUSEBUTTONUP:
            # if the mouse was released, try snapping the piece to the grid
            pos = self.game.board.on_square(self.drag_item.rect)
            if pos is not None:
                self.game.board.snap_piece(self.drag_item.rect, pos)
            else:
                # the piece is off the grid - roll it back instead
                self.drag_item.rect.center = self.rollback_pos
            self.drag_item = None
            self.rollback_pos = None
        if self.drag_item is not None:
            # if we&#39;re dragging something, center it on the mouse
            self.drag_item.rect.center = pygame.mouse.get_pos()

    def render(self):
        &#34;&#34;&#34;Update the display to render the game on screen&#34;&#34;&#34;
        # clear the screen, draw the board, draw the pieces, then flip the display
        self.screen.fill(&#34;black&#34;)
        self.game.board_group.draw(self.screen)
        self.game.pieces_group.draw(self.screen)
        pygame.display.flip()

    def run(self):
        &#34;&#34;&#34;Run the game&#34;&#34;&#34;
        # initialize display stuff
        self.screen = pygame.display.set_mode((720, 720))
        self.clock = pygame.time.Clock()
        # main game loop
        self.running = True
        while self.running:
            # handle all the game events
            for event in pygame.event.get():
                self._handle_event(event)
            # render the game
            self.render()
            # limit the FPS to 60
            self.clock.tick(60)
        # no need to do pygame.quit() - pygame is
        # uninitialized automatically when the
        # Python interpreter shuts down. We don&#39;t
        # want to uninitialize pygame while it&#39;s
        # still needed</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="PyShogi.gui.GameWindow.render"><code class="name flex">
<span>def <span class="ident">render</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Update the display to render the game on screen</p></div>
</dd>
<dt id="PyShogi.gui.GameWindow.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Run the game</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="PyShogi" href="index.html">PyShogi</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="PyShogi.gui.GameBoard" href="#PyShogi.gui.GameBoard">GameBoard</a></code></h4>
<ul class="">
<li><code><a title="PyShogi.gui.GameBoard.add_piece" href="#PyShogi.gui.GameBoard.add_piece">add_piece</a></code></li>
<li><code><a title="PyShogi.gui.GameBoard.on_square" href="#PyShogi.gui.GameBoard.on_square">on_square</a></code></li>
<li><code><a title="PyShogi.gui.GameBoard.snap_piece" href="#PyShogi.gui.GameBoard.snap_piece">snap_piece</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="PyShogi.gui.GamePiece" href="#PyShogi.gui.GamePiece">GamePiece</a></code></h4>
</li>
<li>
<h4><code><a title="PyShogi.gui.GameState" href="#PyShogi.gui.GameState">GameState</a></code></h4>
</li>
<li>
<h4><code><a title="PyShogi.gui.GameWindow" href="#PyShogi.gui.GameWindow">GameWindow</a></code></h4>
<ul class="">
<li><code><a title="PyShogi.gui.GameWindow.render" href="#PyShogi.gui.GameWindow.render">render</a></code></li>
<li><code><a title="PyShogi.gui.GameWindow.run" href="#PyShogi.gui.GameWindow.run">run</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
